# ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…

## ë‹¤ì–‘í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•

âœ… ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ í¬ê²Œ 4ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.     
- ìƒì„±ì ì£¼ì…     
- ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)     
- í•„ë“œ ì£¼ì…     
- ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…      

<br/>

âœ…  ìƒì„±ì ì£¼ì…     
- ìƒì„±ì í˜¸ì¶œì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥ëœë‹¤.      
- **ë¶ˆë³€**, **í•„ìˆ˜** ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©     

```java
@Component
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    } // constructor
}
```     

ğŸ’¡ ìƒì„±ìê°€ ë”± 1ê°œë§Œ ìˆìœ¼ë©´ @Autowiredë¥¼ ìƒëµí•´ë„ ìë™ ì£¼ì… ëœë‹¤. ë¬¼ë¡  ìŠ¤í”„ë§ ë¹ˆì—ë§Œ í•´ë‹¹í•œë‹¤     

<br/>

âœ…  ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)     
- **ì„ íƒ**, **ë³€ê²½** ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©     
- ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì˜ ìˆ˜ì •ì ë©”ì„œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.     
```java
public class OrderServiceImpl implements OrderService {

    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;

    @Autowired
    public void setMemberRepository(MemberRepository memberRepository) {
        System.out.println("memberRepository = " + memberRepository);
        this.memberRepository = memberRepository;
    }

    @Autowired
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        System.out.println("discountPolicy = " + discountPolicy);
        this.discountPolicy = discountPolicy;
    }
}
```

â†’ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ì–´ë„ ë™ì‘í•˜ê²Œ í•˜ë ¤ë©´ @Autowired(required = false) ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤.     
â†’ ìƒì„±ì ì£¼ì…ì€ ë¹ˆì— ë“±ë¡í•  ë•Œ ìë™ ì£¼ì…ì´ ë˜ëŠ”ë° setter ëŠ” ì£¼ì… 2ë²ˆì§¸ ë‹¨ê³„ì—ì„œ..       

<br/>

âœ…  í•„ë“œ ì£¼ì…     
- ì½”ë“œê°€ ê°„ê²°í•´ì„œ ë§ì€ ê°œë°œìë“¤ì„ ìœ í˜¹í•˜ì§€ë§Œ ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•´ì„œ í…ŒìŠ¤íŠ¸ í•˜ê¸° í˜ë“¤ë‹¤ëŠ” ì¹˜ëª…ì ì¸ ë‹¨ì ì´ ìˆë‹¤.     
- DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤.     
- ì‚¬ìš©í•˜ì§€ ë§ì!      
ã€€- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ì½”ë“œì™€ ê´€ê³„ ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ     
ã€€- ìŠ¤í”„ë§ ì„¤ì •ì„ ëª©ì ìœ¼ë¡œ í•˜ëŠ” @Configuration ê°™ì€ ê³³ì—ì„œë§Œ íŠ¹ë³„í•œ ìš©ë„ë¡œ ì‚¬ìš©     

```java
@Autowired private MemberRepository memberRepository;
@Autowired private DiscountPolicy discountPolicy;
```

<br/>

âœ… ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…     
- í•œë²ˆì— ì—¬ëŸ¬ í•„ë“œë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.     
- ì¼ë°˜ì ìœ¼ë¡œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.     

```java
@Component
public class OrderServiceImpl implements OrderService{

    private  MemberRepository memberRepository;
    private  DiscountPolicy discountPolicy;

    @Autowired
    public void init(MemberRepository memberRepository, DiscountPolicy discountPolicy){
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }// init
}
```

## ì˜µì…˜ ì²˜ë¦¬

- @Autowired ë§Œ ì‚¬ìš©í•˜ë©´ required ì˜µì…˜ì˜ ê¸°ë³¸ê°’ì´ true ë¡œ ë˜ì–´ ìˆì–´ì„œ ìë™ ì£¼ì… ëŒ€ìƒì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.      

<br/>

âœ… ìë™ ì£¼ì… ëŒ€ìƒì„ ì˜µì…˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.     
- @Autowired(required=false) : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ìˆ˜ì •ì ë©”ì„œë“œ ìì²´ê°€ í˜¸ì¶œ ì•ˆë¨     
- org.springframework.lang.@Nullable : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ nullì´ ì…ë ¥ëœë‹¤.     
- Optional<> : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ Optional.empty ê°€ ì…ë ¥ëœë‹¤.    

```java
public class AutowiredTest {

    @Test
    void AutowiredOption(){
        ApplicationContext ac = new AnnotationConfigApplicationContext(TestBean.class);

    }// AutowiredOption

    static class TestBean {

        @Autowired(required = false)
        public void setNoBean1(Member noBean1){
            System.out.println("noBean1 = " + noBean1);
        }// setNoBean1

        @Autowired
        public void setNoBean2(@Nullable Member noBean2){
            System.out.println("noBean2 = " + noBean2);
        }// setNoBean2

        @Autowired
        public void setNoBean3(Optional<Member> noBean3){
            System.out.println("noBean3 = " + noBean3);
        }// setNoBean1

    } //TestBean class

}// end class
```

![spring_basic2_59.png](../img/spring_basic2_59.png)

<br/>

## ìƒì„±ì ì£¼ì…ì„ ì„ íƒí•´ë¼!

âœ… **ë¶ˆë³€**      
- ëŒ€ë¶€ë¶„ì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ í•œë²ˆ ì¼ì–´ë‚˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ê¹Œì§€ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•  ì¼ì´ ì—†ë‹¤. ì˜¤íˆë ¤ ëŒ€ë¶€ë¶„ì˜ ì˜ì¡´ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì „ê¹Œì§€ ë³€í•˜ë©´ ì•ˆëœë‹¤.(ë¶ˆë³€í•´ì•¼ í•œë‹¤.)     
- ìˆ˜ì •ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´, setXxx ë©”ì„œë“œë¥¼ publicìœ¼ë¡œ ì—´ì–´ë‘ì–´ì•¼ í•œë‹¤.     
- ëˆ„êµ°ê°€ ì‹¤ìˆ˜ë¡œ ë³€ê²½í•  ìˆ˜ ë„ ìˆê³ , ë³€ê²½í•˜ë©´ ì•ˆë˜ëŠ” ë©”ì„œë“œë¥¼ ì—´ì–´ë‘ëŠ” ê²ƒì€ ì¢‹ì€ ì„¤ê³„ ë°©ë²•ì´ ì•„ë‹ˆë‹¤.     
- ìƒì„±ì ì£¼ì…ì€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ë¯€ë¡œ ì´í›„ì— í˜¸ì¶œë˜ëŠ” ì¼ì´ ì—†ë‹¤. ë”°ë¼ì„œ ë¶ˆë³€í•˜ê²Œ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.     

<br/>

âœ… **ëˆ„ë½**      
- í”„ë ˆì„ì›Œí¬ ì—†ì´ ìˆœìˆ˜í•œ ìë°” ì½”ë“œë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²½ìš°     

<br/>

- ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…) ì´ì˜€ì„ ê²½ìš° (ìˆœìˆ˜ ìë°”ì½”ë“œ) 
```java
class OrderServiceImplTest {

    @Test
    void createOrder(){
        OrderServiceImpl orderService = new OrderServiceImpl();
        orderService.createOrder(1L, "itemA", 10000);
        // -> NullPointerException ì˜¤ë¥˜
    }// createOrder

} // end class
```
- ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒì²˜ëŸ¼ ì£¼ì… ë°ì´í„°ë¥¼ ëˆ„ë½ í–ˆì„ ë•Œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤     
â‡’ IDEì—ì„œ ë°”ë¡œ ì–´ë–¤ ê°’ì„ í•„ìˆ˜ë¡œ ì£¼ì…í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.    

![spring_basic2_60.png](../img/spring_basic2_60.png)     

<br/>

âœ… final í‚¤ì›Œë“œ     
- ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í•„ë“œì— final í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ìƒì„±ìì—ì„œ í˜¹ì‹œë¼ë„ ê°’ì´ ì„¤ì •ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ì‹œì ì— ë§‰ì•„ì¤€ë‹¤     
- ì˜¤ì§ ìƒì„±ì ì£¼ì… ë°©ì‹ë§Œ final í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.     

<br/>

## ë¡¬ë³µê³¼ ìµœì‹  íŠ¸ë Œë“œ

âœ… ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš© ë°©ë²•     
- build.gradle ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€      

```java
plugins {
	id 'org.springframework.boot' version '2.6.1'
	id 'io.spring.dependency-management' version '1.0.11.RELEASE'
	id 'java'
}

group = 'hello'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

//lombok ì„¤ì • ì¶”ê°€ ì‹œì‘
configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}
//lombok ì„¤ì • ì¶”ê°€ ë

repositories {
	mavenCentral()
}

dependencies {
	implementation 'org.springframework.boot:spring-boot-starter'

	//lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ ì‹œì‘
	compileOnly 'org.projectlombok:lombok'
	annotationProcessor 'org.projectlombok:lombok'

	testCompileOnly 'org.projectlombok:lombok'
	testAnnotationProcessor 'org.projectlombok:lombok'
	//lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ ë

	testImplementation('org.springframework.boot:spring-boot-starter-test') {
		exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
	}
}

test {
	useJUnitPlatform()
}

```

1. Preferences(ìœˆë„ìš° File Settings) plugin lombok ê²€ìƒ‰ ì„¤ì¹˜ ì‹¤í–‰ (ì¬ì‹œì‘)     
2. Preferences Annotation Processors ê²€ìƒ‰ Enable annotation processing ì²´í¬ (ì¬ì‹œì‘)     
3. ì„ì˜ì˜ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  @Getter, @Setter í™•ì¸      

<br/>

- ìƒì„±ìê°€ ë”± 1ê°œë§Œ ìˆìœ¼ë©´ @Autowired ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤.     

<br/>

- ìµœì¢… ê²°ê³¼ ì½”ë“œ
```java
@Component
@RequiredArgsConstructor
// final ë¶™ì€ ê±¸ ê°€ì§€ê³  ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì¤Œ
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

/*
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    } // constructor
*/
}
```
â†’ @RequiredArgsConstructor ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ finalì´ ë¶™ì€ í•„ë“œë¥¼ ëª¨ì•„ì„œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.     

<br/>

## ì¡°íšŒ ë¹ˆì´ 2ê°œ ì´ìƒ - ë¬¸ì œ

- DiscountPolicy ì˜ í•˜ìœ„ íƒ€ì…ì¸ FixDiscountPolicy , RateDiscountPolicy ë‘˜ë‹¤ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ
ì„ ì–¸í•´ë³´ì.  @Component     

![spring_basic2_61.png](../img/spring_basic2_61.png)     

â€”> í•´ê²°..     

<br/>

## @Autowired í•„ë“œëª…, @Qualifier, @Primary

âœ…ì¡°íšŒ ëŒ€ìƒ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ í•´ê²° ë°©ë²•     
- @Autowired í•„ë“œ ëª… ë§¤ì¹­     
- @Qualifier @Qualifierë¼ë¦¬ ë§¤ì¹­ ë¹ˆ ì´ë¦„ ë§¤ì¹­      
- @Primary ì‚¬ìš©     

<br/>

âœ… @Autowired í•„ë“œ ëª… ë§¤ì¹­

- @Autowired ëŠ” íƒ€ì… ë§¤ì¹­ì„ ì‹œë„í•˜ê³ , ì´ë•Œ ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ **í•„ë“œ ì´ë¦„, íŒŒë¼ë¯¸í„° ì´ë¦„**ìœ¼ë¡œ ë¹ˆ ì´ë¦„ì„ ì¶”ê°€ ë§¤ì¹­í•œë‹¤.    

<br/>

- í•„ë“œëª…ì„ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë³€ê²½     
```java
@Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy rateDiscountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = rateDiscountPolicy;
    } // constructor
```

<br/>

âœ… @Qualifier ì‚¬ìš©     

- @Qualifier ëŠ” ì¶”ê°€ êµ¬ë¶„ìë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•ì´ë‹¤. ì£¼ì…ì‹œ ì¶”ê°€ì ì¸ ë°©ë²•ì„ ì œê³µí•˜ëŠ” ê²ƒì´ì§€ ë¹ˆ ì´ë¦„ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.     
<br/>
- ë¹ˆ ë“±ë¡ì‹œ @Qualifierë¥¼ ë¶™ì—¬ì¤€ë‹¤     

```java
@Component
@Qualifier("mainDiscountPolicy")
public class RateDiscountPolicy implements DiscountPolicy {}
```

```java
@Component
@Qualifier("fixDiscountPolicy")
public class FixDiscountPolicy implements DiscountPolicy {}
```
<br/>

- ì£¼ì…ì‹œì— @Qualifierë¥¼ ë¶™ì—¬ì£¼ê³  ë“±ë¡í•œ ì´ë¦„ì„ ì ì–´ì¤€ë‹¤.

```java
	@Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    } // constructor
```

<br/>

âœ… @Primary ì‚¬ìš©     
- @Primary ëŠ” ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤. @Autowired ì‹œì— ì—¬ëŸ¬ ë¹ˆì´ ë§¤ì¹­ë˜ë©´ @Primary ê°€ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.

```java
@Component
@Primary
public class RateDiscountPolicy implements DiscountPolicy {}
```

```java
@Component
public class FixDiscountPolicy implements DiscountPolicy {}
```

ğŸ’¡ @Primary ëŠ” ê¸°ë³¸ê°’ ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê²ƒì´ê³ , @Qualifier ëŠ” ë§¤ìš° ìƒì„¸í•˜ê²Œ ë™ì‘í•œë‹¤.      
ìŠ¤í”„ë§ì€ ìë™ë³´ë‹¤ëŠ” ìˆ˜ë™ì´, ë„’ì€ ë²”ìœ„ì˜ ì„ íƒê¶Œ ë³´ë‹¤ëŠ” ì¢ì€ ë²”ìœ„ì˜ ì„ íƒê¶Œì´ ìš°ì„  ìˆœìœ„ê°€ ë†’ë‹¤.       
â‡’ ì—¬ê¸°ì„œë„ @Qualifier ê°€ ìš°ì„ ê¶Œì´ ë†’ë‹¤.   

<br/>

## ì• ë…¸í…Œì´ì…˜ ì§ì ‘ ë§Œë“¤ê¸°

- @Qualifier("mainDiscountPolicy") ì´ë ‡ê²Œ ë¬¸ìë¥¼ ì ìœ¼ë©´ ì»´íŒŒì¼ì‹œ íƒ€ì… ì²´í¬ê°€ ì•ˆë  ê²½ìš°..     

```java
package hello.core.annotation;


import org.springframework.beans.factory.annotation.Qualifier;

import java.lang.annotation.*;

@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.TYPE, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Inherited
@Documented
@Qualifier("mainDiscountPolicy")
public @interface MainDiscountPolicy {
    
} // end interface
```

```java
@Component
@MainDiscountPolicy
public class RateDiscountPolicy implements DiscountPolicy {}
```

```java
@Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @MainDiscountPolicy DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    } // constructor
```


<br/>

## ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ, List, Map

- ì˜ˆë¥¼ ë“¤ì–´ì„œ í• ì¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ë°, í´ë¼ì´ì–¸íŠ¸ê°€ í• ì¸ì˜ ì¢…ë¥˜(rate, fix)ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤ê³ ê°€ì •í•´ë³´ì. ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë©´ ì†Œìœ„ ë§í•˜ëŠ” ì „ëµ íŒ¨í„´ì„ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```java
public class AllBeanTest {

    @Test
    void findAllBean(){
        ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class, DiscountService.class);

        DiscountService discountService = ac.getBean(DiscountService.class);
        Member member = new Member(1L, "userA", Grade.VIP);
        int discountPrice = discountService.discount(member, 10000, "fixDiscountPolicy");

        assertThat(discountService).isInstanceOf(DiscountService.class);
        assertThat(discountPrice).isEqualTo(1000);

        int rateDiscountPrice = discountService.discount(member, 20000, "rateDiscountPolicy");
        assertThat(rateDiscountPrice).isEqualTo(2000);
    }// findAllBean

    static class DiscountService {
        private final Map<String, DiscountPolicy> policyMap;
        private final List<DiscountPolicy> policies;

        @Autowired
        public DiscountService(Map<String, DiscountPolicy> policyMap, List<DiscountPolicy> policies) {
            this.policyMap = policyMap;
            this.policies = policies;
            System.out.println("policyMap = " + policyMap);
            System.out.println("policies = " + policies);
        }// constructor

        public int discount(Member member, int price, String discountCode) {
            DiscountPolicy discountPolicy = policyMap.get(discountCode);
            return discountPolicy.discount(member, price);
        }// discount

    } // DiscountService class

}// end class
```

âœ… ë¡œì§ ë¶„ì„     
- DiscountServiceëŠ” Mapìœ¼ë¡œ ëª¨ë“  DiscountPolicy ë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤. ì´ë•Œ fixDiscountPolicy , rateDiscountPolicy ê°€ ì£¼ì…ëœë‹¤.      
- discount () ë©”ì„œë“œëŠ” discountCodeë¡œ "fixDiscountPolicy"ê°€ ë„˜ì–´ì˜¤ë©´ mapì—ì„œ fixDiscountPolicy ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤. ë¬¼ë¡  â€œrateDiscountPolicyâ€ê°€ ë„˜ì–´ì˜¤ë©´ rateDiscountPolicy ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤.      

<br/>

âœ… ì£¼ì… ë¶„ì„     
- Map<String, DiscountPolicy> : mapì˜ í‚¤ì— ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ì„ ë„£ì–´ì£¼ê³ , ê·¸ ê°’ìœ¼ë¡œ DiscountPolicy íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•œ ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ë‹´ì•„ì¤€ë‹¤.      
- List<DiscountPolicy> : DiscountPolicy íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•œ ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ë‹´ì•„ì¤€ë‹¤. ë§Œì•½ í•´ë‹¹í•˜ëŠ” íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´, ë¹ˆ ì»¬ë ‰ì…˜ì´ë‚˜ Mapì„ ì£¼ì…í•œë‹¤.     

<br/>

â†’  new AnnotationConfigApplicationContext() ë¥¼ í†µí•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•œë‹¤.      
â†’ AutoAppConfig.class , DiscountService.class ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸°ë©´ì„œ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.      
ğŸ’¡ ì •ë¦¬í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ë©´ì„œ, í•´ë‹¹ ì»¨í…Œì´ë„ˆì— ë™ì‹œì— AutoAppConfig , DiscountService ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡í•œë‹¤.     

<br/>

## ìë™, ìˆ˜ë™ì˜ ì˜¬ë°”ë¥¸ ì‹¤ë¬´ ìš´ì˜ ê¸°ì¤€

âœ… í¸ë¦¬í•œ ìë™ ê¸°ëŠ¥ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì      
- ì„¤ì • ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì‹¤ì œ ë™ì‘í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì´ìƒì ì´ì§€ë§Œ, ê°œë°œì ì…ì¥ì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ í•˜ë‚˜ ë“±ë¡í•  ë•Œ @Component ë§Œ ë„£ì–´ì£¼ë©´ ëë‚˜ëŠ” ì¼ì„ @Configuration ì„¤ì • ì •ë³´ì— ê°€ì„œ @Bean ì„ ì ê³ , ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì£¼ì…í•  ëŒ€ìƒì„ ì¼ì¼ì´ ì ì–´ì£¼ëŠ” ê³¼ì •ì€ ìƒë‹¹íˆ ë²ˆê±°ë¡­ë‹¤.      
- ê·¸ë¦¬ê³  ê²°ì •ì ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ì„ ì‚¬ìš©í•´ë„ OCP, DIPë¥¼ ì§€í‚¬ ìˆ˜ ìˆë‹¤.

<br/>

âœ… ê·¸ëŸ¬ë©´ ìˆ˜ë™ ë¹ˆ ë“±ë¡ì€ ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ê¹Œ?      

- ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í¬ê²Œ ì—…ë¬´ ë¡œì§ê³¼ ê¸°ìˆ  ì§€ì› ë¡œì§ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.      
- **ì—…ë¬´ ë¡œì§ ë¹ˆ**: ì›¹ì„ ì§€ì›í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬, í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆëŠ” ì„œë¹„ìŠ¤, ë°ì´í„° ê³„ì¸µì˜ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬ë“±ì´ ëª¨ë‘ ì—…ë¬´ ë¡œì§ì´ë‹¤. ë³´í†µ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ê°œë°œí•  ë•Œ ì¶”ê°€ë˜ê±°ë‚˜ ë³€ê²½ëœë‹¤.     
ã€€â‡’  ìë™ ê¸°ëŠ¥ : ìˆ«ì ë§ê³ , ìœ ì‚¬í•œ íŒ¨í„´..       

- **ê¸°ìˆ  ì§€ì› ë¹ˆ**: ê¸°ìˆ ì ì¸ ë¬¸ì œë‚˜ ê³µí†µ ê´€ì‹¬ì‚¬(AOP)ë¥¼ ì²˜ë¦¬í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ë‚˜, ê³µí†µ ë¡œê·¸ ì²˜ë¦¬ ì²˜ëŸ¼ ì—…ë¬´ ë¡œì§ì„ ì§€ì›í•˜ê¸° ìœ„í•œ í•˜ë¶€ ê¸°ìˆ ì´ë‚˜ ê³µí†µ ê¸°ìˆ ë“¤ì´ë‹¤.      
ã€€â‡’ ìˆ˜ë™ ê¸°ëŠ¥ :  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê´‘ë²”ìœ„í•˜ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê¸°ìˆ  ì§€ì› ê°ì²´ëŠ” ìˆ˜ë™ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì„œ ë”±! ì„¤ì • ì •ë³´ì— ë°”ë¡œ ë‚˜íƒ€ë‚˜ê²Œ í•˜ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì¢‹ë‹¤.      

<br/>

âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì—ì„œ ë‹¤í˜•ì„±ì„ ì ê·¹ í™œìš©í•  ë•Œ      
- ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì… - ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ, List, Mapì„ ë‹¤ì‹œ ë³´ì.      
ã€€â‡’ ìˆ˜ë™ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê±°ë‚˜ ë˜ëŠ” ìë™ìœ¼ë¡œí•˜ë©´ íŠ¹ì • íŒ¨í‚¤ì§€ì— ê°™ì´ ë¬¶ì–´ë‘ëŠ”ê²Œ ì¢‹ë‹¤!      

```java
@Configuration
public class DiscountPolicyConfig {
		@Bean
		public DiscountPolicy rateDiscountPolicy() {
				return new RateDiscountPolicy();
		}

		@Bean
		public DiscountPolicy fixDiscountPolicy() {
				return new FixDiscountPolicy();
		}
}
```
